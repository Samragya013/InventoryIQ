<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>InventoryIQ ‚Äî Retail Inventory Planner</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

  <!-- Responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Styles -->
  <link rel="stylesheet" href="/static/css/main.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  >
</head>

<body>
  <!-- Particle Background -->
  <div id="particleContainer" class="particle-container"></div>

  <!-- ================= TOP NAVIGATION BAR ================= -->
  <nav class="top-nav">
    <div class="nav-container">
      <div class="nav-logo">
        <div class="logo-icon">üìä</div>
        <div class="logo-text">
          <div class="logo-name">InventoryIQ</div>
          <div class="logo-tagline">Demand Intelligence</div>
        </div>
      </div>
      <ul class="nav-items">
        <li><a href="#" class="nav-link active" title="Inventory Planner">üìã Inventory Planner</a></li>
      </ul>
    </div>
  </nav>

  <!-- ================= APP CONTAINER ================= -->
  <div class="app-container">

    <!-- ================= MAIN CONTENT ================= -->
    <main class="main-content">

      <!-- ========== HEADER ========== -->
      <header class="header">
        <h1>Inventory Plan</h1>
        <p>
          Review risk-adjusted order recommendations to balance service levels and inventory cost.
        </p>
      </header>

      <!-- ========== SUMMARY BAR (NEW) ========== -->
      <div id="summaryBar" class="summary-bar hidden">
        <span id="summaryText"></span>
      </div>

      <!-- ========== MARKET FOCUS CARD ========== -->
      <section class="market-focus-section">
        <div class="market-focus-card">
          <div class="market-focus-header">
            <div class="market-focus-title">
              <span class="market-focus-icon">üéØ</span>
              <h3>Operational Focus</h3>
            </div>
            <div class="market-filter-control">
              <label for="marketFilter" class="market-filter-label">View:</label>
              <select id="marketFilter" class="market-filter-select">
                <option value="all">All Markets</option>
              </select>
            </div>
          </div>
          <p class="market-focus-subtitle">WHERE TO DIRECT ATTENTION</p>
          <div id="marketFocusContent" class="market-focus-content">
            <div class="market-focus-loading">Loading market intelligence...</div>
          </div>
        </div>
      </section>

      <!-- ========== CONTROLS CARD ========== -->
      <section class="controls-card">
        <h3>Generate Plan</h3>
        <p class="controls-subtitle">Select a market and product category to generate a new inventory plan.</p>

        <div class="controls-grid enterprise-controls">

          <!-- Market Selector (Primary) -->
          <div class="control control-primary">
            <label for="marketSelect">
              <span class="control-icon">üåç</span>
              Market
            </label>
            <select id="marketSelect">
              <option value="all">All Markets</option>
            </select>
            <span class="control-hint">Primary filter for all insights</span>
          </div>

          <!-- Product Category (Secondary) -->
          <div class="control control-secondary">
            <label for="categorySelect">
              <span class="control-icon">üì¶</span>
              Product Category
              <span class="optional-badge">Optional</span>
            </label>
            <select id="categorySelect">
              <option value="all">All Categories</option>
            </select>
            <span class="control-hint">Filters inventory recommendations</span>
          </div>

          <!-- Action Button -->
          <button id="generateBtn" class="primary-btn">
            Generate Inventory Plan
          </button>

        </div>

        <!-- Scenario Controls (Hidden until plan generated) -->
        <div id="scenarioSection" class="scenario-section hidden">
          <div class="scenario-header">
            <h4>Demand Scenario</h4>
            <span class="scenario-info" title="Simulate demand scenarios">?</span>
          </div>
          <div class="scenario-controls">
            <input type="range" id="demandMultiplier" min="0.5" max="2" step="0.1" value="1" class="scenario-slider">
            <div class="scenario-display">
              <span class="scenario-label">Demand:</span>
              <span id="multiplierValue" class="scenario-value">1.0x</span>
              <span id="multiplierContext" class="scenario-context">Base case (current forecast)</span>
            </div>
            <div class="scenario-presets">
              <button class="preset-btn" data-value="0.7">Low (‚àí30%)</button>
              <button class="preset-btn" data-value="1">Base</button>
              <button class="preset-btn" data-value="1.3">High (+30%)</button>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== RESULTS SECTION ========== -->
      <section class="results">

        <!-- ================= BUSINESS IMPACT & INACTION RISK (2-COLUMN) ================= -->
        <div class="two-column-section">
          
          <!-- Business Impact Card -->
          <div class="card">
            <div class="card-header">
              <h3>Plan Impact</h3>
              <p class="card-subtitle">WHAT THIS PLAN DELIVERS</p>
            </div>
            <div id="businessImpact" class="impact-grid">
              <!-- Dynamically populated -->
            </div>
          </div>

          <!-- If No Action Is Taken Card -->
          <div class="card">
            <div class="card-header">
              <h3>Risk of Inaction</h3>
              <p class="card-subtitle">WHAT HAPPENS IF YOU WAIT</p>
            </div>
            <div id="inactionRisk" class="inaction-grid">
              <!-- Dynamically populated -->
            </div>
          </div>

        </div>

        <!-- ================= DEMAND FORECAST & SCENARIO ANALYSIS (2-COLUMN) ================= -->
        <div class="two-column-section">

          <!-- Forecast Chart -->
          <div class="card">
            <div class="card-header">
              <h3>Demand vs. Order Plan</h3>
              <p class="card-subtitle">EXPECTED DEMAND AND RECOMMENDED ORDER QUANTITIES</p>
            </div>
            <canvas id="forecastChart" height="120"></canvas>
          </div>

          <!-- Scenario Analysis -->
          <div class="card">
            <div class="card-header">
              <h3>Scenario Snapshot</h3>
              <p class="card-subtitle">HOW ORDER TOTALS CHANGE UNDER DIFFERENT DEMAND SCENARIOS</p>
            </div>
            <div id="scenarioSnapshot" class="scenario-snapshot-table">
              <!-- Dynamically populated -->
            </div>
          </div>

        </div>

        <!-- Inventory Recommendations Table -->
        <div class="card">
          <div class="card-header">
            <h3>Recommended Orders</h3>
            <p class="card-subtitle">PRODUCT-LEVEL ORDER QUANTITIES</p>
          </div>
          <div id="resultsArea" class="placeholder">
          </div>
        </div>

        <!-- Risk Assessment -->
        <div class="card">
          <div class="card-header">
            <h3>Order Risk Summary</h3>
            <p class="card-subtitle">PRODUCTS WITH UNSTABLE DEMAND</p>
          </div>
          <div id="riskSummary" class="risk-summary-content">
            <!-- Dynamically populated -->
          </div>
          <div id="riskInsight" class="risk-insight hidden">
            <span class="risk-insight-icon">üí°</span>
            <div class="risk-insight-text">
              <!-- Dynamically populated -->
            </div>
          </div>
        </div>

        <!-- Forecast Confidence & Assumptions -->
        <div class="card">
          <div class="card-header">
            <h3>Why This Recommendation Is Reliable</h3>
            <p class="card-subtitle">PLANNING ASSUMPTIONS AND DATA BASIS</p>
          </div>
          <div id="confidenceBox" class="confidence-items-list">
            <!-- Dynamically populated -->
          </div>
        </div>

        <!-- Recommended Action -->
        <div class="card">
          <div class="card-header">
            <h3>Decision & Next Steps</h3>
            <p class="card-subtitle">PRIMARY RECOMMENDATION AND FOLLOW-UP</p>
          </div>
          <div id="operationalRec" class="operational-rec">
            <!-- Dynamically populated -->
          </div>
        </div>

        <!-- System Health -->
        <div class="card">
          <div class="card-header">
            <h3>System Status</h3>
            <p class="card-subtitle">DATA AND PLANNING ENGINE STATUS</p>
          </div>
          <div id="modelHealth" class="health-grid">
            <!-- Dynamically populated -->
          </div>
        </div>

      </section>

      <!-- ========== FOOTER ========== -->
      <footer class="footer">
        <div class="footer-main">
          <p>InventoryIQ ‚Äî End-to-end demand intelligence platform</p>
        </div>
        <div class="footer-signals">
          <span class="footer-signal" id="dataWindow">Data: Last 52 weeks</span>
          <span class="footer-signal-sep">‚Ä¢</span>
          <span class="footer-signal" id="lastRun">Last updated: Today</span>
          <span class="footer-signal-sep">‚Ä¢</span>
          <span class="footer-signal footer-env">Production</span>
        </div>
      </footer>

    </main>
  </div>

  <!-- ================= JS ================= -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/js/app.js"></script>

</body>
</html>
