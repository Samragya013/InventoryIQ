<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>InventoryIQ â€” Retail Inventory Planner</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

  <!-- Responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Styles -->
  <link rel="stylesheet" href="/static/css/main.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  >
</head>

<body>
  <!-- Particle Background -->
  <div id="particleContainer" class="particle-container"></div>

  <!-- ================= TOP NAVIGATION BAR ================= -->
  <nav class="top-nav">
    <div class="nav-container">
      <div class="nav-logo">
        <div class="logo-icon">ðŸ“Š</div>
        <div class="logo-text">
          <div class="logo-name">InventoryIQ</div>
          <div class="logo-tagline">Demand Intelligence</div>
        </div>
      </div>
      <ul class="nav-items">
        <li><a href="#" class="nav-link active" title="Inventory Planner">ðŸ“‹ Inventory Planner</a></li>
      </ul>
    </div>
  </nav>

  <!-- ================= APP CONTAINER ================= -->
  <div class="app-container">

    <!-- ================= MAIN CONTENT ================= -->
    <main class="main-content">

      <!-- ========== HEADER ========== -->
      <header class="header">
        <h1>Inventory Planning Dashboard</h1>
        <p>
          Generate risk-adjusted inventory order recommendations using
          demand forecasting intelligence.
        </p>
      </header>

      <!-- ========== SUMMARY BAR (NEW) ========== -->
      <div id="summaryBar" class="summary-bar hidden">
        <span id="summaryText"></span>
      </div>

      <!-- ========== CONTROLS CARD ========== -->
      <section class="controls-card">
        <h3>Planning Controls</h3>

        <div class="controls-grid">

          <!-- Store -->
          <div class="control">
            <label for="storeSelect">Store</label>
            <select id="storeSelect">
              <option value="">Select store</option>
            </select>
          </div>

          <!-- Products -->
          <div class="control">
            <label for="productSelect">
              Products
              <span id="productCount" class="product-count-badge">(0 selected)</span>
            </label>
            <select id="productSelect" multiple title="Hold Ctrl/Cmd to select multiple products"></select>
          </div>

          <!-- Action Button -->
          <button id="generateBtn" class="primary-btn" disabled>
            Generate Inventory Plan
          </button>

        </div>

        <!-- Scenario Controls (Hidden until plan generated) -->
        <div id="scenarioSection" class="scenario-section hidden">
          <div class="scenario-header">
            <h4>Demand Multiplier</h4>
            <span class="scenario-info" title="Simulate demand scenarios">?</span>
          </div>
          <div class="scenario-controls">
            <input type="range" id="demandMultiplier" min="0.5" max="2" step="0.1" value="1" class="scenario-slider">
            <div class="scenario-display">
              <span class="scenario-label">Demand:</span>
              <span id="multiplierValue" class="scenario-value">1.0x</span>
              <span id="multiplierContext" class="scenario-context">Base case (current forecast)</span>
            </div>
            <div class="scenario-presets">
              <button class="preset-btn" data-value="0.7">Low (âˆ’30%)</button>
              <button class="preset-btn" data-value="1">Base</button>
              <button class="preset-btn" data-value="1.3">High (+30%)</button>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== RESULTS SECTION ========== -->
      <section class="results">

        <!-- ================= DECISION ZONE (TOP PRIORITY) ================= -->
        <div class="decision-zone">
          <div class="card card-decision">
            <div class="decision-header">
              <div class="decision-status">
                <span class="decision-icon">âœ…</span>
                <span class="decision-title">Ready to Execute with Confidence</span>
              </div>
            </div>
            <div class="decision-content">
              <div class="decision-main">
                <div class="decision-label">Recommendation</div>
                <div class="decision-value" id="decisionValue">Order 1,518 units across 1 product</div>
              </div>
              <div class="decision-badges">
                <span class="badge badge-risk" id="decisionRiskBadge">âšª Low Risk</span>
                <span class="badge badge-confidence" id="decisionConfidenceBadge">ðŸŸ¢ High (87%)</span>
              </div>
              <div class="decision-authority" id="decisionAuthority">
                Stable demand + low volatility = low execution risk. Proceed immediately.
              </div>
              <button class="decision-cta">Create Purchase Order</button>
            </div>
          </div>
        </div>

        <!-- ================= TIER 1: IMMEDIATE EXECUTIVE SIGNALS ================= -->
        <div class="tier-1-executive">

          <!-- Business Impact Summary Card (TIER 1 - DOMINANT) -->
          <div class="card card-tier-1">
            <div class="card-header">
              <div>
                <h3>Business Impact</h3>
                <p class="card-subtitle">What this plan achieves</p>
              </div>
            </div>
            <div id="businessImpact" class="impact-grid">
              <!-- Dynamically populated -->
            </div>
          </div>

          <!-- If No Action Taken Card (TIER 1 - COUNTERFACTUAL RISK) -->
          <div class="card card-tier-1 card-warning">
            <div class="card-header">
              <div>
                <h3>If No Action Is Taken</h3>
                <p class="card-subtitle">Risk of inaction</p>
              </div>
            </div>
            <div id="inactionRisk" class="inaction-grid">
              <!-- Dynamically populated -->
            </div>
          </div>

        </div>

        <!-- ================= TIER 2: EXPLORATORY INSIGHTS ================= -->
        <div class="tier-2-exploratory">

          <!-- Demand Forecast Overview (TIER 2) -->
          <div class="card card-tier-2">
            <div class="card-header">
              <div>
                <h3>Demand Forecast</h3>
                <p class="card-subtitle">Expected demand vs. recommended order</p>
              </div>
            </div>
            <canvas id="forecastChart" height="120"></canvas>
          </div>

          <!-- Scenario Snapshot Card (TIER 2) -->
          <div class="card card-tier-2">
            <div class="card-header">
              <div>
                <h3>Scenario Analysis</h3>
                <p class="card-subtitle">What-if scenarios at a glance</p>
              </div>
            </div>
            <div id="scenarioSnapshot" class="scenario-snapshot-table">
              <!-- Dynamically populated -->
            </div>
          </div>

        </div>

        <!-- ================= TIER 3: TRUST SIGNALS (CONSOLIDATED) ================= -->
        <div class="tier-3-trust">

          <!-- Inventory Recommendations Table -->
          <div class="card card-tier-3">
            <div class="card-header">
              <div>
                <h3>Inventory Recommendations</h3>
                <p class="card-subtitle">Item-level order quantities</p>
              </div>
            </div>
            <div id="resultsArea" class="placeholder">
            </div>
          </div>

          <!-- CONSOLIDATED: Confidence & Trust Signals -->
          <div class="card card-tier-3">
            <div class="card-header">
              <div>
                <h3>Why You Can Trust This</h3>
                <p class="card-subtitle">Confidence, risk, and model health</p>
              </div>
              <div class="overall-confidence" id="overallConfidence">
                <span class="confidence-score">87%</span>
                <span class="confidence-label">Confidence</span>
              </div>
            </div>
            
            <!-- Trust Summary -->
            <div class="trust-summary">
              <div class="trust-row">
                <span class="trust-icon">âœ“</span>
                <span class="trust-item">
                  <strong>Risk Profile:</strong> Low (0 high-risk items)
                </span>
              </div>
              <div class="trust-row">
                <span class="trust-icon">âœ“</span>
                <span class="trust-item">
                  <strong>Data Quality:</strong> Current (52 weeks)
                </span>
              </div>
              <div class="trust-row">
                <span class="trust-icon">âœ“</span>
                <span class="trust-item">
                  <strong>Model Status:</strong> Production (v1.0)
                </span>
              </div>
              <div class="trust-row">
                <span class="trust-icon">âœ“</span>
                <span class="trust-item">
                  <strong>Forecast Reliability:</strong> Stable
                </span>
              </div>
            </div>

            <!-- Confidence Drivers -->
            <div class="confidence-drivers">
              <div class="drivers-label">Why this confidence score?</div>
              <ul class="drivers-list" id="driversContent">
                <!-- Dynamically populated -->
              </ul>
            </div>

            <!-- Collapsible Details -->
            <button class="toggle-details" id="toggleDetails">
              <span>Learn More</span>
              <span class="toggle-arrow">â–¼</span>
            </button>
            <div class="details-section hidden" id="detailsSection">
              <div class="details-content" id="detailsContent">
                <!-- Dynamically populated -->
              </div>
            </div>
          </div>

        </div>

      </section>

      <!-- ========== FOOTER ========== -->
      <footer class="footer">
        <div class="footer-main">
          <p>InventoryIQ â€” End-to-end demand intelligence platform</p>
        </div>
        <div class="footer-signals">
          <span class="footer-signal" id="dataWindow">Data: Last 52 weeks</span>
          <span class="footer-signal-sep">â€¢</span>
          <span class="footer-signal" id="lastRun">Last updated: Today</span>
          <span class="footer-signal-sep">â€¢</span>
          <span class="footer-signal footer-env">Production</span>
        </div>
      </footer>

    </main>
  </div>

  <!-- ================= JS ================= -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/js/app.js"></script>

</body>
</html>
